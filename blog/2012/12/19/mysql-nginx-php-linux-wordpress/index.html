
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>手工编译安装Mysql+Nginx+PHP+CentOS+wordpress - 末日前几天</title>
  <meta name="author" content="leolovenet">

  
  <meta name="description" content="这里是leolovenet的记忆自留地,关注科技与生活." />
  
  <meta name="keywords" content="leolovenet,末日前几天,the days before Doomsday" />

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leolovenet.com/blog/2012/12/19/mysql-nginx-php-linux-wordpress">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="末日前几天" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37154253-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">末日前几天</a></h1>
  
    <h2>the days before Doomsday</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leolovenet.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">手工编译安装Mysql+Nginx+PHP+CentOS+wordpress</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>首先,关于这个组合非常的出名,(早先是apache用做web服务,后被nginx篡位), 他们的好处就不细讲了,具体的可以看一下<a href="http://blog.s135.com/nginx_php_v6/" title="张宴" target="_blank">张宴同学的Nginx 0.8.x + PHP 5.2.13（FastCGI）搭建胜过Apache十倍的Web服务器（第6版）[原创]</a>,那篇文章写的很详细,不过有段时间没有更新了,有些软件有些老,而且我的搭建环境是在CentOS(x86_64)位下,有一些不同的地方.<br/>
OK, Next.
安装步骤为先安装Mysql, 然后PHP, 然后Nginx, 最后讲一下nginx下配置worldpress时怎样修改配置文件.<br/>
顺便说一下,本文中提到的所有开源软件截止到<span style="color:red;">2012年12月21日</span>,全部为最新<strong>稳定版</strong>.</p>

<p>本文提及的所有的软件全部下载到了<code>/data/packages/</code>目录下.
本文提及的所有的软件全部安装到了<code>/data/webservers/</code>目录下.
(如果你的安装环境跟本文有出处的话,只需要在下面的初始环境命令中更换变量<code>{TEMP_DIR_PACKAGES|TEMP_DIR_WEBSERVERS}</code>即可)
本文所有安装的新服务都会利用<code>chkconfig</code>添加到系统启动服务里,确保机器重启后服务能够自动启动.<br/>
本文所有安装好的新服务都可以利用标准的命令格式<code>/etc/init.d/XXX {start|stop|restart|reload}</code>进行手工的<code>{start|stop|restart|reload}</code><br/>
Ready Go.<br/>
初步准备,利用CentOS系统自带的yum命令安装、升级所需的程序库,建立基本目录,构建初始环境.</p>

<!--more-->




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkdir -p /data/packages
</span><span class='line'>mkdir -p /data/webservers
</span><span class='line'><span class="nb">export </span><span class="nv">TEMP_DIR_PACKAGES</span><span class="o">=</span>/data/packages
</span><span class='line'><span class="nb">export </span><span class="nv">TEMP_DIR_WEBSERVERS</span><span class="o">=</span>/data/webservers
</span><span class='line'>yum -y install gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel openldap-clients openldap-servers cmake
</span></code></pre></td></tr></table></div></figure>


<p>敲入回车之后,让yum飞一会&hellip; &hellip;</p>

<h2>Mysql</h2>

<p>我们第一个要安装mysql,全部安装命令如下,注意我把下载的压缩包的详细版本换成了<code>*</code>,这样有助与解决小版本的不同,可能你下载的mysql会升级小版本号:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_PACKAGES</span>
</span><span class='line'>wget http://dev.mysql.com/downloads/mirror.php?id<span class="o">=</span>411115
</span><span class='line'>tar -zxf mysql-5.5.*.tar.gz
</span><span class='line'><span class="nb">cd </span>mysql-5.5.*
</span><span class='line'>groupadd mysql
</span><span class='line'>useradd -r -g mysql mysql
</span><span class='line'>cmake -D  CMAKE_INSTALL_PREFIX:PATH<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/  -D MYSQL_DATADIR:PATH<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/data/ .
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;$TEMP_DIR_WEBSERVERS/mysql/lib/&quot;</span> &gt;&gt; /etc/ld.so.conf.d/webservers.conf
</span><span class='line'>/sbin/ldconfig
</span><span class='line'>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/
</span><span class='line'>chown -R mysql .
</span><span class='line'>chgrp -R mysql .
</span><span class='line'>scripts/mysql_install_db --user<span class="o">=</span>mysql
</span><span class='line'>chown -R root .
</span><span class='line'>chown -R mysql data
</span><span class='line'>cp support-files/my-medium.cnf /etc/my.cnf
</span><span class='line'>cp support-files/mysql.server /etc/init.d/mysql.server
</span><span class='line'>chkconfig --add mysql.server
</span><span class='line'>chkconfig --list mysql.server
</span><span class='line'>/etc/init.d/mysql.server start
</span></code></pre></td></tr></table></div></figure>


<p>上面最后一行命令就是用我说的标准启动服务格式,开启mysql服务.当然你也可以用<code>service xxx start</code>这种格式.<br/>
下面的的命令是可选的,你也可以不这样做,但是还是建议看一下,毕竟没有坏处只有好处.<br/>
<strong>Next command is optional</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#运行脚本,给mysql的root用户设置密码,删除测试的用户和测试数据库</span>
</span><span class='line'><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/bin/mysql_secure_installation
</span><span class='line'><span class="c">#修改mysql配置文件,让它避免中文乱码问题</span>
</span><span class='line'>vim /etc/my.cnf
</span><span class='line'><span class="c">#在[client]后面添加</span>
</span><span class='line'>default-character-set <span class="o">=</span> utf8
</span><span class='line'><span class="c">#在[mysqld]后面添加</span>
</span><span class='line'>character-set-server <span class="o">=</span> utf8
</span><span class='line'><span class="c">#用你刚刚设置的root密码登陆mysql,为mysql创建一个新的用户</span>
</span><span class='line'><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/bin/mysql -uroot -p
</span><span class='line'>GRANT ALL PRIVILEGES ON *.* TO <span class="s1">&#39;leolovenet&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;123&#39;</span>;
</span></code></pre></td></tr></table></div></figure>


<h2>安装php的依赖软件</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_PACKAGES</span>
</span><span class='line'>
</span><span class='line'>wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz
</span><span class='line'>tar zxf libiconv-1.14.tar.gz
</span><span class='line'><span class="nb">cd </span>libiconv-1.14/
</span><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'><span class="nb">cd</span> ../
</span><span class='line'>
</span><span class='line'>wget http://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz/download
</span><span class='line'>tar zxf libmcrypt-2.5.8.tar.gz
</span><span class='line'><span class="nb">cd </span>libmcrypt-2.5.8/
</span><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;/usr/local/lib/&quot;</span> &gt;&gt; /etc/ld.so.conf.d/webservers.conf
</span><span class='line'>/sbin/ldconfig
</span><span class='line'><span class="nb">cd </span>libltdl/
</span><span class='line'>./configure --enable-ltdl-install
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'><span class="nb">cd</span> ../../
</span><span class='line'>
</span><span class='line'>wget http://sourceforge.net/projects/mhash/files/latest/download
</span><span class='line'>tar zxvf mhash-*.tar.gz
</span><span class='line'><span class="nb">cd </span>mhash-*/
</span><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'><span class="nb">cd</span> ../
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>wget http://sourceforge.net/projects/mcrypt/files/latest/download
</span><span class='line'>tar zxvf mcrypt-*.tar.gz
</span><span class='line'><span class="nb">cd </span>mcrypt-*/
</span><span class='line'>/sbin/ldconfig
</span><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'><span class="nb">cd</span> ../
</span></code></pre></td></tr></table></div></figure>


<h2>安装php</h2>

<p>因为我的机器是x86_64位环境,所以在配置php的时候加入了<code>--with-libdir=lib64</code>选项.<br/>
此时,php会检查mysql的<code>$TEMP_DIR_WEBSERVERS/mysql/lib64</code>目录,而不是<code>$TEMP_DIR_WEBSERVERS/mysql/lib</code>目录,所以我们加入了一个软链接</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ln -s <span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/lib <span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/lib64
</span><span class='line'>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_PACKAGES</span>
</span><span class='line'>wget http://cn2.php.net/get/php-5.3.20.tar.gz/from/this/mirror
</span><span class='line'>tar zxf php-5.3.20.tar.gz
</span><span class='line'><span class="nb">cd </span>php-5.3.20
</span><span class='line'>./configure --prefix<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/php --with-config-file-path<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/php/etc --with-mysql<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql --with-mysqli<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/mysql/bin/mysql_config --with-iconv-dir<span class="o">=</span>/usr/local --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir<span class="o">=</span>/usr --enable-xml --disable-rpath  --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --with-curlwrappers --enable-mbregex  --enable-fpm  --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-ldap --with-ldap-sasl --with-xmlrpc --enable-zip --enable-soap --enable-sqlite-utf8 --with-libdir<span class="o">=</span>lib64
</span><span class='line'>make <span class="nv">ZEND_EXTRA_LIBS</span><span class="o">=</span><span class="s1">&#39;-liconv&#39;</span>
</span><span class='line'>make install
</span><span class='line'>cp <span class="nv">$TEMP_DIR_PACKAGES</span>/php-5.3.20/sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm
</span><span class='line'>chmod 755 /etc/init.d/php-fpm
</span><span class='line'>chkconfig --add php-fpm
</span><span class='line'>cp <span class="nv">$TEMP_DIR_PACKAGES</span>/php-5.3.20/php.ini-production <span class="nv">$TEMP_DIR_WEBSERVERS</span>/php/etc/php.ini
</span><span class='line'>cp <span class="nv">$TEMP_DIR_WEBSERVERS</span>/php/etc/php-fpm.conf.default <span class="nv">$TEMP_DIR_WEBSERVERS</span>/php/etc/php-fpm.conf
</span><span class='line'>
</span><span class='line'><span class="c">#手工修改php.ini文件,vim $TEMP_DIR_WEBSERVERS/php/etc/php.ini</span>
</span><span class='line'><span class="c">#修改cgi.fix_pathinfo=0,防止Nginx文件类型错误解析漏洞.</span>
</span><span class='line'><span class="c">#手工修改vim $TEMP_DIR_WEBSERVERS/php/etc/php-fpm.ini文件,根据自己机器的内存大小,修改php-fpm开启的运行进程数</span>
</span><span class='line'><span class="c">#pm.max_spare_servers = 5</span>
</span><span class='line'>
</span><span class='line'>/etc/init.d/php-fpm start
</span></code></pre></td></tr></table></div></figure>


<h2>Nginx</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget http://sourceforge.net/projects/pcre/files/latest/download
</span><span class='line'>tar zxf pcre-*
</span><span class='line'><span class="nb">cd </span>pcre-*/
</span><span class='line'>./configure
</span><span class='line'>make <span class="o">&amp;&amp;</span> make install
</span><span class='line'><span class="nb">cd</span> ../
</span><span class='line'>
</span><span class='line'>wget http://nginx.org/download/nginx-1.2.6.tar.gz
</span><span class='line'>./configure --user<span class="o">=</span>www --group<span class="o">=</span>www --prefix<span class="o">=</span><span class="nv">$TEMP_DIR_WEBSERVERS</span>/nginx --with-http_stub_status_module --with-http_ssl_module
</span><span class='line'>make <span class="o">&amp;&amp;</span> make install
</span><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_WEBSERVERS</span>/nginx/conf
</span><span class='line'>mkdir global
</span><span class='line'>mkdir vhost
</span><span class='line'>mkdir -p <span class="nv">$TEMP_DIR_WEBSERVERS</span>/www/other/
</span><span class='line'>mv nginx.conf nginx.conf.org
</span></code></pre></td></tr></table></div></figure>


<p>手工编辑 <code>vim $TEMP_DIR_WEBSERVERS/nginx/conf/nginx.conf</code>,输入下面的内容.<br/>
注意下面内容的路径<code>/data/webservers</code>,如果你的环境不同,请手工更换.</p>

<pre>
user  www www;
#ususally equal to number of CPU's you have. run command "grep processor /proc/cpuinfo | wc -l" to find it
worker_processes  1;
error_log  /data/webservers/nginx/logs/nginx_error.log  crit;
pid        /data/webservers/nginx/nginx.pid;

#Specifies the value for maximum file descriptors that can be opened by this process. 
#worker_rlimit_nofile 65535;

events {
    #use epoll;
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
      
    #rewrite_log on;
    sendfile on;
    #tcp_nopush     on;
    keepalive_timeout 3;
    #tcp_nodelay on;
    
    fastcgi_connect_timeout 300;
    fastcgi_send_timeout 300;
    fastcgi_read_timeout 300;
    fastcgi_buffer_size 64k;
    fastcgi_buffers 4 64k;
    fastcgi_busy_buffers_size 128k;
    fastcgi_temp_file_write_size 128k;
  
    gzip on;
    gzip_min_length  1k;
    gzip_buffers     4 16k;
    gzip_http_version 1.0;
    gzip_comp_level 2;
    gzip_types       text/plain application/x-javascript text/css application/xml;
    gzip_vary on;

    #php max upload limit cannot be larger than this       
    client_max_body_size 13m;
    server_names_hash_bucket_size 128;
    client_header_buffer_size 32k;
    large_client_header_buffers 4 32k;
      
    index  index.php index.html index.htm;
  # Upstream to abstract backend connection(s) for PHP.
    upstream php {
                #this should match value of "listen" directive in php-fpm pool
                #server unix:/tmp/php-fpm.sock;
                server 127.0.0.1:9000;
      }

    log_format  access  '$remote_addr - $remote_user [$time_local] "$request" '
              '$status $body_bytes_sent "$http_referer" '
              '"$http_user_agent" $http_x_forwarded_for';

    server  {
        listen       80;
        server_name  bbkanba.com  www.bbkanba.com;
        charset utf-8;
      root      /data/webservers/www/other/;
      access_log  /data/webservers/nginx/logs/access.log  access;
    
    include   global/restrictions.conf;
    include   global/php.conf;
    } 
  include vhost/*.conf;
}
</pre>


<p>进入到<code>cd $TEMP_DIR_WEBSERVERS/nginx/conf/global/</code>,创建php.conf,输入下面的内容:</p>

<pre>
# Pass all .php files onto a php-fpm/php-fcgi server.
location ~ \.php$ {
    # Zero-day exploit defense.
    # http://forum.nginx.org/read.php?2,88845,page=3
    # Won't work properly (404 error) if the file is not stored on this server, which is entirely possible with php-fpm/php-fcgi.
    # Comment the 'try_files' line out if you set up php-fpm/php-fcgi on another machine.  And then cross your fingers that you won't get hacked.
    try_files $uri =404;

    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    #NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

    include fastcgi_params;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    #fastcgi_intercept_errors on;
    fastcgi_pass php;
}
</pre>


<p>继续创建restrictions.conf,输入下面的内容:</p>

<pre>
# Global restrictions configuration file.
# Designed to be included in any server {} block.

location = /favicon.ico {
  log_not_found off;
  access_log off;
}

location = /robots.txt {
  allow all;
  log_not_found off;
  access_log off;
}

# Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).
# Keep logging the requests to parse later (or to pass to firewall utilities such as fail2ban)
location ~ /\. {
  deny all;
}

# Deny access to any files with a .php extension in the uploads directory
# Works in sub-directory installs and also in multisite network
# Keep logging the requests to parse later (or to pass to firewall utilities such as fail2ban)
location ~* /(?:uploads|files)/.*\.php$ {
  deny all;
}
</pre>


<p>配置文件创建完毕,为了遵循我们之前说的,可以用<code>/etc/init.d/XXX {start|stop|restart|reload}</code>这种格式进行服务的控制,需要手工创建脚本,<br/>
<code>vim /etc/init.d/nginx</code>,输入下面内容:<br/>
注意下面内容的路径<code>/data/webservers</code>,如果你的环境不同,请手工更换.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'><span class="c"># nginx - this script starts and stops the nginx daemon</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># chkconfig:   - 85 15</span>
</span><span class='line'><span class="c"># Required-Start:    $remote_fs $network</span>
</span><span class='line'><span class="c"># Required-Stop:     $remote_fs $network</span>
</span><span class='line'><span class="c"># Default-Start:     2 3 4 5</span>
</span><span class='line'><span class="c"># Default-Stop:      0 1 6</span>
</span><span class='line'><span class="c"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</span>
</span><span class='line'><span class="c">#               proxy and IMAP/POP3 proxy server</span>
</span><span class='line'><span class="c"># processname: nginx</span>
</span><span class='line'><span class="c"># config:      /data/webservers/nginx/conf/nginx.conf</span>
</span><span class='line'><span class="c"># pidfile:     /data/webservers/nginx/nginx.pid</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Source function library.</span>
</span><span class='line'>. /etc/rc.d/init.d/functions
</span><span class='line'>
</span><span class='line'><span class="c"># Source networking configuration.</span>
</span><span class='line'>. /etc/sysconfig/network
</span><span class='line'>
</span><span class='line'><span class="c"># Check that networking is up.</span>
</span><span class='line'><span class="o">[</span> <span class="s2">&quot;$NETWORKING&quot;</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit </span>0
</span><span class='line'>
</span><span class='line'><span class="nv">nginx</span><span class="o">=</span><span class="s2">&quot;/data/webservers/nginx/sbin/nginx&quot;</span>
</span><span class='line'><span class="nv">prog</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$nginx</span><span class="k">)</span>
</span><span class='line'>
</span><span class='line'><span class="nv">NGINX_CONF_FILE</span><span class="o">=</span><span class="s2">&quot;/data/webservers/nginx/conf/nginx.conf&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="o">[</span> -f /etc/sysconfig/nginx <span class="o">]</span> <span class="o">&amp;&amp;</span> . /etc/sysconfig/nginx
</span><span class='line'>
</span><span class='line'><span class="nv">lockfile</span><span class="o">=</span>/var/lock/subsys/nginx
</span><span class='line'>
</span><span class='line'>make_dirs<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>   <span class="c"># make required directories</span>
</span><span class='line'>   <span class="nv">user</span><span class="o">=</span><span class="sb">`</span><span class="nv">$nginx</span> -V 2&gt;&amp;1 | grep <span class="s2">&quot;configure arguments:&quot;</span> | sed <span class="s1">&#39;s/[^*]*--user=\([^ ]*\).*/\1/g&#39;</span> -<span class="sb">`</span>
</span><span class='line'>   <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;`grep $user /etc/passwd`&quot;</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">       </span>useradd -M -s /bin/nologin <span class="nv">$user</span>
</span><span class='line'>   <span class="k">fi</span>
</span><span class='line'><span class="k">   </span><span class="nv">options</span><span class="o">=</span><span class="sb">`</span><span class="nv">$nginx</span> -V 2&gt;&amp;1 | grep <span class="s1">&#39;configure arguments:&#39;</span><span class="sb">`</span>
</span><span class='line'>   <span class="k">for </span>opt in <span class="nv">$options</span>; <span class="k">do</span>
</span><span class='line'><span class="k">       if</span> <span class="o">[</span> <span class="sb">`</span><span class="nb">echo</span> <span class="nv">$opt</span> | grep <span class="s1">&#39;.*-temp-path&#39;</span><span class="sb">`</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">           </span><span class="nv">value</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$opt</span> | cut -d <span class="s2">&quot;=&quot;</span> -f 2<span class="sb">`</span>
</span><span class='line'>           <span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">&quot;$value&quot;</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'>               <span class="c"># echo &quot;creating&quot; $value</span>
</span><span class='line'>               mkdir -p <span class="nv">$value</span> <span class="o">&amp;&amp;</span> chown -R <span class="nv">$user</span> <span class="nv">$value</span>
</span><span class='line'>           <span class="k">fi</span>
</span><span class='line'><span class="k">       fi</span>
</span><span class='line'><span class="k">   done</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>start<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="o">[</span> -x <span class="nv">$nginx</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit </span>5
</span><span class='line'>    <span class="o">[</span> -f <span class="nv">$NGINX_CONF_FILE</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit </span>6
</span><span class='line'>    make_dirs
</span><span class='line'>    <span class="nb">echo</span> -n <span class="s2">$&quot;Starting $prog: &quot;</span>
</span><span class='line'>    daemon <span class="nv">$nginx</span> -c <span class="nv">$NGINX_CONF_FILE</span>
</span><span class='line'>    <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>    <span class="nb">echo</span>
</span><span class='line'>    <span class="o">[</span> <span class="nv">$retval</span> -eq 0 <span class="o">]</span> <span class="o">&amp;&amp;</span> touch <span class="nv">$lockfile</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$retval</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>stop<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nb">echo</span> -n <span class="s2">$&quot;Stopping $prog: &quot;</span>
</span><span class='line'>    killproc <span class="nv">$prog</span> -QUIT
</span><span class='line'>    <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>    <span class="nb">echo</span>
</span><span class='line'>    <span class="o">[</span> <span class="nv">$retval</span> -eq 0 <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -f <span class="nv">$lockfile</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$retval</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>restart<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    configtest <span class="o">||</span> <span class="k">return</span> <span class="nv">$?</span>
</span><span class='line'>    stop
</span><span class='line'>    sleep 1
</span><span class='line'>    start
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>reload<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    configtest <span class="o">||</span> <span class="k">return</span> <span class="nv">$?</span>
</span><span class='line'>    <span class="nb">echo</span> -n <span class="s2">$&quot;Reloading $prog: &quot;</span>
</span><span class='line'>    killproc <span class="nv">$nginx</span> -HUP
</span><span class='line'>    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>    <span class="nb">echo</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>force_reload<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    restart
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>configtest<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="nv">$nginx</span> -t -c <span class="nv">$NGINX_CONF_FILE</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>rh_status<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    status <span class="nv">$prog</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>rh_status_q<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    rh_status &gt;/dev/null 2&gt;&amp;1
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
</span><span class='line'>    start<span class="o">)</span>
</span><span class='line'>        rh_status_q <span class="o">&amp;&amp;</span> <span class="nb">exit </span>0
</span><span class='line'>        <span class="nv">$1</span>
</span><span class='line'>        ;;
</span><span class='line'>    stop<span class="o">)</span>
</span><span class='line'>        rh_status_q <span class="o">||</span> <span class="nb">exit </span>0
</span><span class='line'>        <span class="nv">$1</span>
</span><span class='line'>        ;;
</span><span class='line'>    restart|configtest<span class="o">)</span>
</span><span class='line'>        <span class="nv">$1</span>
</span><span class='line'>        ;;
</span><span class='line'>    reload<span class="o">)</span>
</span><span class='line'>        rh_status_q <span class="o">||</span> <span class="nb">exit </span>7
</span><span class='line'>        <span class="nv">$1</span>
</span><span class='line'>        ;;
</span><span class='line'>    force-reload<span class="o">)</span>
</span><span class='line'>        force_reload
</span><span class='line'>        ;;
</span><span class='line'>    status<span class="o">)</span>
</span><span class='line'>        rh_status
</span><span class='line'>        ;;
</span><span class='line'>    condrestart|try-restart<span class="o">)</span>
</span><span class='line'>        rh_status_q <span class="o">||</span> <span class="nb">exit </span>0
</span><span class='line'>            ;;
</span><span class='line'>    *<span class="o">)</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">$&quot;Usage: $0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}&quot;</span>
</span><span class='line'>        <span class="nb">exit </span>2
</span><span class='line'><span class="k">esac</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后,需要赋予脚本可执行权限:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>chmod 755 /etc/init.d/nginx
</span><span class='line'>chkconfig --add nginx
</span><span class='line'>/etc/init.d/nginx start
</span></code></pre></td></tr></table></div></figure>


<p>到此,nginx+php+mysql已经部署完毕.下面是配置wordpress了.</p>

<h2>wordpress</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="nv">$TEMP_DIR_PACKAGES</span>
</span><span class='line'>wget http://wordpress.org/latest.zip
</span><span class='line'>unzip latest.zip
</span><span class='line'>mv wordpress <span class="nv">$TEMP_DIR_WEBSERVERS</span>/www/
</span></code></pre></td></tr></table></div></figure>


<p>剩下的是添加wordpress的nginx配置文件:<code>vim $TEMP_DIR_WEBSERVERS/www/nginx/conf/global/wordpress.conf</code></p>

<pre>
# WordPress single blog rules.
# Designed to be included in any server {} block.

# This order might seem weird - this is attempted to match last if rules below fail.
# http://wiki.nginx.org/HttpCoreModule
location / {
  try_files $uri $uri/ /index.php?$args;
}

# Add trailing slash to */wp-admin requests.
rewrite /wp-admin$ $scheme://$host$uri/ permanent;

# Directives to send expires headers and turn off 404 error logging.
location ~* ^.+\.(ogg|ogv|svg|svgz|eot|otf|woff|mp4|ttf|rss|atom|jpg|jpeg|gif|png|ico|zip|tgz|gz|rar|bz2|doc|xls|exe|ppt|tar|mid|midi|wav|bmp|rtf)$ {
       access_log off; log_not_found off; expires max;
}

# Uncomment one of the lines below for the appropriate caching plugin (if used).
#include global/wordpress-wp-super-cache.conf;
#include global/wordpress-w3-total-cache.conf;
</pre>


<p>接着是另外一个配置文件:<code>vim $TEMP_DIR_WEBSERVERS/www/nginx/conf/vhost/wordpress.conf</code></p>

<pre>
server {
    listen       80;
    server_name  blog.bbkanba.com;
    charset utf-8;
    index index.html index.php;
    root  /data/webservers/www/wordpress/;
    access_log  /data/webservers/nginx/logs/wordpress.log  access;

    include   global/restrictions.conf;
    include   global/php.conf;  
    include   global/wordpress.conf;
}
</pre>


<p>接着重新加载一下nginx的配置文件</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/etc/init.d/nginx reload
</span></code></pre></td></tr></table></div></figure>


<p>你就可以访问自己上面配置的blog地址, <code>http://blog.bbkanba.com</code>, 进行著名的5分钟安装了.<br/>
如果你需要在nginx上使用更高级的cache规则,对wordpress进行优化的话,建议查看这里:</p>

<p><a href="http://codex.wordpress.org/Nginx">http://codex.wordpress.org/Nginx</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">leolovenet</span></span>

      








  


<time datetime="2012-12-19T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>Linux</a>, <a class='category' href='/blog/categories/mysql/'>Mysql</a>, <a class='category' href='/blog/categories/nginx/'>Nginx</a>, <a class='category' href='/blog/categories/php/'>PHP</a>, <a class='category' href='/blog/categories/wordpress/'>WordPress</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/12/18/hello-world/" title="Previous Post: Hello World">&laquo; Hello World</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/12/22/ShowYourIP/" title="Next Post: 利用php+Bootstrap+QQwrt.dat展示你的IP和位置信息">利用php+Bootstrap+QQwrt.dat展示你的IP和位置信息 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/22/how-to-use-xdebug-and-lldt-to-debug-your-php-code-with-vagrant-and-phpstorm/">How to Use Xdebug and LLDT to Debug Your PHP Code With Vagrant and PHPStrom</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/28/git-and-proxy/">配置git使用proxy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/28/a-linux-server-hardware-detection-resource-script/">检测 Linux 服务器硬件资源的 Bash 脚本</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/13/hi-octopress/">Hi Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/11/enhanced-ping-command-function-with-ruby/">用Ruby增强ping命令</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leolovenet">@leolovenet</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leolovenet',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - leolovenet -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'leolovenet';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://leolovenet.com/blog/2012/12/19/mysql-nginx-php-linux-wordpress/';
        var disqus_url = 'http://leolovenet.com/blog/2012/12/19/mysql-nginx-php-linux-wordpress/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
